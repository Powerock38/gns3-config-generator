-> MPLS Configuration

Create one VRF for each VPN connected (exemple client A)

1.    vrf definition Client_A

2.    rd 100:110

3.    route-target export 100:1000

4.    route-target import 100:1000

5.    address-family ipv4
 
6.    exit-address-family

On the PE router, add the interfaces that connect the CE to the corresponding VRF (exemple client A)

1.    interface GigabitEthernet1/0

2.    vrf forwarding Client_A

3.    ip address 10.0.4.2 255.255.255.0

4.    end


-> Configure MP-BGP

Enabling OSPF
SUMMARY STEPS

1.    enable

2.    configure terminal

3.    router ospf 2

4.    network 10.10.10.4 0.0.0.255 area 2

5.    end

Enables MPLS on the L3 interface connecting to the P router

1.    interface FastEthernet0/0

2.    description link to Pauillac

3.    ip address 10.1.1.14 255.255.255.252

4.    mpls ip

5.    end

Adds an entry to the BGP or MP-BGP neighbor table
And enables BGP sessions to use a specific operational interface for TCP connections.

1.    router bgp 65000

2.    bgp log-neighbor-changes

3.    neighbor 10.10.10.2 remote-as 65000

Creates the VPNv4 neighbor session to the Route Reflector
And to send the community attribute to the BGP neighbor

1.    address-family vpnv4

2.    neighbor 10.10.10.2 activate

3.    neighbor 10.10.10.2 send-community both

4.    exit-address-family

eBGP sessions to each CE router belonging to different customers
The eBGP sessions are configured within the VRF address family

1.    address-family ipv4 vrf Client_A

2.    neighbor 10.0.4.1 remote-as 65002

3.    neighbor 10.0.4.1 activate

4.    exit-address-family


DO NOT FORGET TO SAVE (write) AND QUIT (end, exit) !!!!

  
 
 

 
 
 
  